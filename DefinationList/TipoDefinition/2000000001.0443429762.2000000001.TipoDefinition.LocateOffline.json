{"_index":"2000000001.1000000001","_type":"_doc","_id":"2000000001.0443429762.2000000001.TipoDefinition.LocateOffline","_version":50,"_score":1,"_source":{"___commit_number___":"d03d4f6e-dc7d-455c-a23a-9bc628eb8c6d","off_tipo_id":"0978651202","tipo_id":"LocateOffline","application":"0443429762","tipo_meta":{"display_name":"LocateOffline","tipo_type_labels":["Simple Tipo"],"tipo_type":["entity"],"tipo_type_copy_labels":"Simple Tipo","tipo_type_copy":"entity","tipo_name":"LocateOffline","description":"..","custom_plugin":{"list":false,"view":false,"create":false},"desktop_max_columns":"3","tablet_max_columns":"2","mobile_max_columns":"1","grid_max_columns":"10"},"tipo_fields":[{"sequence":-1,"display_name":"LocateOffline ID","field_type_labels":"Text","field_type":"string","field_name":"tipo_id","hidden_":true,"_ARRAY_META":{"_HASH":"1927348677"}},{"sequence":1,"display_name":"Locate","field_type_labels":"Action","field_type":"action","field_name":"locate","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","action_settings_":{"javascript_code":"console.log(\"locate\",data_handle);\n\n if (navigator && navigator.geolocation) {\n            navigator.geolocation.watchPosition(successCallback, errorCallback);\n        } else {\n            console.log('Geolocation is not supported');\n        }\n\n \nfunction errorCallback(err) {\n    // const { key } = navigation.currentEntry;\n    // navigation.traverseTo(key);\n    var geocoder = new google.maps.Geocoder();\n    geocoder.geocode({\n        'address':'Koyambedu, Chennai, Tamil Nadu 600107'\n    },(res,status)=>{\n        console.log(\"lati\",res[0].geometry.location.lat())\n        console.log(\"longi\",res[0].geometry.location.lng())\n    })\n    return false;\n    console.log(\"error\",err)\n}\n \nfunction successCallback(position) {\n       var latitude = position.coords.latitude;\n  var longitude = position.coords.longitude;\n  console.log(\"lat\",latitude);\n  console.log(\"long\",longitude)\n  data_handle.tipo.coordinates = \"--\"+latitude+ \"---\" + longitude+ \"--\";\n  data_handle.formControl.get('coordinates').setValue(\"--\"+latitude+ \"---\" + longitude+ \"--\");\n    }\n\nreturn true;"},"_ARRAY_META":{"_HASH":"5501355511"}},{"sequence":2,"display_name":"Coordinates","field_type_labels":"Text","field_type":"string","field_name":"coordinates","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"0407210433"}},{"sequence":3,"display_name":"Geo location","field_type_labels":"Geo Location","field_type":"location","field_name":"geo_locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"visibility_expression":"$tipo_handle.tipoInternalHandleService.isOnline","relationship_type":"reference","_ARRAY_META":{"_HASH":"9304059919"}},{"sequence":4,"display_name":"Address","field_type_labels":"Text","field_type":"string","field_name":"geo_locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"visibility_expression":"!$tipo_handle.tipoInternalHandleService.isOnline","relationship_type":"reference","_ARRAY_META":{"_HASH":"5538755725"}},{"sequence":5,"display_name":"location","field_type_labels":"geo_locn_location","field_type":"FieldGroup.geo_locn_location","field_name":"locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"8822904608"}},{"sequence":6,"display_name":"street_address","field_type_labels":"Text","field_type":"string","field_name":"street_address","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"6937771188"}},{"sequence":7,"display_name":"suburb","field_type_labels":"Text","field_type":"string","field_name":"suburb","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"4038837592"}},{"sequence":8,"display_name":"_postalcode","field_type_labels":"Text","field_type":"string","field_name":"_postalcode","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"0636205406"}},{"sequence":9,"display_name":"state_","field_type_labels":"Text","field_type":"string","field_name":"state_","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"0668819426"}}],"tipo_field_groups":[{"tipo_group_name":"geo_locn_location","tipo_fields":[{"sequence":1,"display_name":"lat","field_type_labels":"Text","field_type":"string","field_name":"lat","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"2558619092"}},{"sequence":2,"display_name":"long","field_type_labels":"Text","field_type":"string","field_name":"long","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"7871451163"}}],"_ARRAY_META":{"_HASH":"7220354908"}}],"tipo_list":{"desktop_grid":"true","enable_pagination":true,"default_page_size":10,"allow_search":true},"tipo_event_js":[{"event_name":"OnView (data_handle)","javascript_code":"// if(tipoHandle.isOnline) {\n//     var geocoder = new google.maps.Geocoder();\n//     geocoder.geocode({\n//         'address': data_handle.tipo.geo_locn\n//     },(res,status)=>{\n//         console.log(\"lati\",res[0].geometry.location.lat())\n//         console.log(\"longi\",res[0].geometry.location.lng());\n//         data_handle.tipo.geo_locn_location.lat = res[0].geometry.location.lat()\n//         data_handle.tipo.geo_locn_location.long = res[0].geometry.location.lng()\n//         console.log(\"data\",data_handle);\n//         tipoHandle.updateTipo('LocateOffline',data_handle.tipo.tipo_id,data_handle.tipo);\n//         const myLatLng = { lat: res[0].geometry.location.lat(), lng: res[0].geometry.location.lng() }\n//         const maploc = new google.maps.Map(document.getElementById('map-canvas'), {\n//             zoom: 17,\n//             center: myLatLng,\n//         });\n//         var marker = new google.maps.Marker({\n//             position: myLatLng,\n//             maploc,\n//             title: data_handle.tipo.geo_locn,\n//         });\n//         marker.setMap(maploc);\n        \n//     })  \n// }","_ARRAY_META":{"_HASH":"1101892137"}},{"event_name":"PostServerSave (data_handle)","javascript_code":"if(tipoHandle.isOnline && !data_handle.tipo.geo_locn_location) {\n    var geocoder = new google.maps.Geocoder();\n    geocoder.geocode({\n        'address': data_handle.tipo.geo_locn\n    },(res,status)=>{\n        console.log(\"lati\",res[0].geometry.location.lat())\n        console.log(\"longi\",res[0].geometry.location.lng());\n        data_handle.tipo.geo_locn_location = {\n            'lat' : res ? res[0].geometry.location.lat() : 0,\n            'long' : res ? res[0].geometry.location.lng() : 0\n        }\n        console.log(\"data\",data_handle);\n        tipoHandle.updateTipo('LocateOffline',data_handle.tipo.tipo_id,data_handle.tipo);\n        const myLatLng = { \n            lat: res ? res[0].geometry.location.lat() : 0, \n            lng: res ? res[0].geometry.location.lng() : 0\n        }\n        const maploc = new google.maps.Map(document.getElementById('map-canvas'), {\n            zoom: 17,\n            center: myLatLng,\n        });\n        var marker = new google.maps.Marker({\n            position: myLatLng,\n            maploc,\n            title: data_handle.tipo.geo_locn,\n        });\n        marker.setMap(maploc);\n    })  \n}","_ARRAY_META":{"_HASH":"6300786658"}}],"updated_dt":1718699369182,"updated_by":null,"updated_date":"2024-06-18T08:29:29.182Z","created_by":"saadmin@forwoodsafety.com","created_dt":"1701180925986","created_date":"2023-11-28T14:15:25.986Z","application_owner_account":"2000000001","account":"2000000001","tipo_name":"TipoDefinition","hash_key":"2000000001.0443429762.2000000001.TipoDefinition.LocateOffline","el_index":true}}
