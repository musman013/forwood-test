{"_index":"2000000001.1000000001","_type":"_doc","_id":"2000000001.0443429762.2000000001.TipoDefinition.CreateWPIVerification","_version":217,"_score":1,"_source":{"___commit_number___":"7f21435d-06ac-4956-8fe9-174ab8d78836","tipo_id":"CreateWPIVerification","application":"0443429762","tipo_meta":{"display_name":"Create WPI Verification","tipo_type_labels":["Simple Tipo"],"tipo_type":["entity"],"tipo_type_copy_labels":"Simple Tipo","tipo_type_copy":"entity","tipo_name":"CreateWPIVerification","description":".......","pre_load":true,"hide_create":true,"hide_edit":true,"hide_delete":true,"custom_plugin":{"create":false},"hide_heading_actions":true,"desktop_max_columns":"3","tablet_max_columns":"2","mobile_max_columns":"1","grid_max_columns":"10"},"tipo_fields":[{"sequence":-1,"display_name":"Checklist ID","field_type_labels":"Text","field_type":"string","field_name":"tipo_id","hidden_":true,"tipo_field_event_js":[{"event_name":"OnChange (data_handle)","javascript_code":"console.log(data_handle);\ntipo_filter = '(site:'+ data_handle.tipo.site + '|| structure:'+ data_handle.tipo.structure +')';","_ARRAY_META":{"_HASH":"1958452314"}}],"_ARRAY_META":{"_HASH":"5901411348"}},{"sequence":1,"display_name___token":"TT___CHOOSE_LOCATION","display_name":"Choose Location","field_type_labels":"TipoSSStructureMasterData","field_type":"Tipo.TipoSSStructureMasterData","field_name":"choose_locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_label":true,"hidden_hyperlink":true,"visibility_expression":"!$tipo.nextLevel","relationship_type":"hierarchy","tipo_field_event_js":[{"event_name":"OnChange (data_handle)","javascript_code":"const new_val = data_handle.new_value;\ndata_handle.tipo.tipo_filter = new_val.__all__keys;\ndata_handle.tipo.hierarchy_key = new_val.__all__hierarchy__keys && new_val.__all__hierarchy__keys[0];\ndata_handle.tipo.site = new_val.site && new_val.site[0];\ndata_handle.tipo.site_labels = new_val.site_labels && new_val.site_labels[0];\ndata_handle.tipo.site_level_1 = new_val.site_level_1 && new_val.site_level_1[0];\ndata_handle.tipo.site_level_1_labels = new_val.site_level_1_labels && new_val.site_level_1_labels[0];\ndata_handle.tipo.site_level_2 = new_val.site_level_2 && new_val.site_level_2[0];\ndata_handle.tipo.site_level_2_labels = new_val.site_level_2_labels && new_val.site_level_2_labels[0];\ndata_handle.tipo.site_level_3 = new_val.site_level_3 && new_val.site_level_3[0];\ndata_handle.tipo.site_level_3_labels = new_val.site_level_3_labels && new_val.site_level_3_labels[0];\ndata_handle.tipo.site_level_4 = new_val.site_level_4 && new_val.site_level_4[0];\ndata_handle.tipo.site_level_4_labels = new_val.site_level_4_labels && new_val.site_level_4_labels[0];\ndata_handle.tipo.site_level_5 = new_val.site_level_5 && new_val.site_level_5[0];\ndata_handle.tipo.site_level_5_labels = new_val.site_level_5_labels && new_val.site_level_5_labels[0];\ndata_handle.tipo.client = new_val.client && new_val.client[0];\ndata_handle.tipo.client_labels = new_val.client_labels && new_val.client_labels[0];\ndata_handle.tipo.company = new_val.company && new_val.company[0];\ndata_handle.tipo.company_labels = new_val.company_labels && new_val.company_labels[0];\ndata_handle.tipo.forwood_level = new_val.forwood_level && new_val.forwood_level[0];\ndata_handle.tipo.forwood_level_labels = new_val.forwood_level_labels && new_val.forwood_level_labels[0];\ndata_handle.tipo.structure = new_val.structure && new_val.structure[0];\ndata_handle.tipo.structure_labels = new_val.structure_labels && new_val.structure_labels[0];\ndata_handle.tipo.structure_level_1 = new_val.structure_level_1 && new_val.structure_level_1[0];\ndata_handle.tipo.structure_level_1_labels = new_val.structure_level_1_labels && new_val.structure_level_1_labels[0];\ndata_handle.tipo.structure_level_2 = new_val.structure_level_2 && new_val.structure_level_2[0];\ndata_handle.tipo.structure_level_2_labels = new_val.structure_level_2_labels && new_val.structure_level_2_labels[0];\ndata_handle.tipo.structure_level_3 = new_val.structure_level_3 && new_val.structure_level_3[0];\ndata_handle.tipo.structure_level_3_labels = new_val.structure_level_3_labels && new_val.structure_level_3_labels[0];\ndata_handle.tipo.structure_level_4 = new_val.structure_level_4 && new_val.structure_level_4[0];\ndata_handle.tipo.structure_level_4_labels = new_val.structure_level_4_labels && new_val.structure_level_4_labels[0];\ndata_handle.tipo.client_locn_id = data_handle.tipo.choose_locn.client[0];\n\ndata_handle.tipo.inspector_contractor_company = tipoHandle.user_meta.user_attributes.user.contractorCompany;\ndata_handle.tipo.inspector = tipoHandle.user_meta.name;\ndata_handle.tipo.inspector_uuid = tipoHandle.user_meta.user_attributes.user.forwoodUuid\n\nvar hierarchy_key_user = tipoHandle.user_meta.user_attributes.user.hierarchy_key;\n //var test = hierarchy_key_user.split()\n if(!_.includes(hierarchy_key_user, '.')){  //forwood level\n   return\n }\n else { //From Hedno level\n   var key_seperated = hierarchy_key_user.split('.')\n   if(!key_seperated[3] && key_seperated.length > 2) {\n     data_handle.tipo.inspector_region = tipoHandle.user_meta.user_attributes.user.companyStructure // region\n     console.log(\"region\",data_handle.tipo.inspector_region)\n     }\n   else if(key_seperated[3] && key_seperated.length > 3) {\n        data_handle.tipo.inspector_region = tipoHandle.user_meta.user_attributes.org.__sm_parent_labels //Region\n        data_handle.tipo.inspector_area = tipoHandle.user_meta.user_attributes.user.companyStructure //Area\n        console.log(\"Area\",data_handle.tipo.inspector_area)\n   }\n   else {\n     return\n   }\n }","_ARRAY_META":{"_HASH":"2501997271"}}],"_ARRAY_META":{"_HASH":"3581006967"}},{"sequence":4,"display_name___token":"TT___FILTER","display_name":"Filter","field_type_labels":"Text","field_type":"string","field_name":"tipo_filter","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"2351440665"}},{"sequence":5,"display_name":"Type","field_type_labels":"Text","field_type":"string","field_name":"type","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","default_value":"inspections_checklist","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"8094968293"}},{"sequence":6,"display_name___token":"TT___COMPANY_39","display_name":"Company","field_type_labels":"Text","field_type":"string","field_name":"client_labels","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":true,"short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"visibility_expression":"$tipo.client_labels","relationship_type":"reference","_ARRAY_META":{"_HASH":"7744128607"}},{"sequence":7,"display_name___token":"TT___SITE_40","display_name":"Region","field_type_labels":"Text","field_type":"string","field_name":"company_labels","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":true,"short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"visibility_expression":"$tipo.client_labels","relationship_type":"reference","_ARRAY_META":{"_HASH":"3279887088"}},{"sequence":8,"display_name___token":"TT___AREA","display_name":"Area","field_type_labels":"Text","field_type":"string","field_name":"structure_level_1_labels","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":true,"short_display":true,"disable_expansion":true,"hidden_hyperlink":true,"visibility_expression":"$tipo.client_labels","relationship_type":"reference","_ARRAY_META":{"_HASH":"3400779899"}},{"sequence":9,"display_name___token":"TT___COMPANY_STRUCTURE","display_name":"Company Structure","field_type_labels":"Text","field_type":"string","field_name":"structure_labels","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":true,"short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"visibility_expression":"$tipo.choose_locn && $tipo.structure_labels","relationship_type":"reference","_ARRAY_META":{"_HASH":"7749706436"}},{"sequence":9,"display_name___token":"TT___CONTRACTOR_COMPANY","display_name":"Contractor Company","field_type_labels":"TipoSSTeams","field_type":"Tipo.TipoSSTeams","field_name":"contractor_company","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_hyperlink":true,"visibility_expression":"$tipo.choose_locn && $tipo_handle.user_meta.user_attributes.user.contractor_company && ($tipo_handle.user_meta.user_attributes.user.employmentStatus == 'Contractor')","mandatory":true,"relationship_type":"reference","select_label_field_labels":"Display Name","select_label_field":"displayName","select_key_field_labels":"ID","select_key_field":"tipo_id","query_params":[{"param_name":"tipo_action","param_value":"true","_ARRAY_META":{"_HASH":"4899893538"}},{"param_name":"per_page","param_value":"5000","_ARRAY_META":{"_HASH":"9829045008"}}],"tipo_field_event_js":[{"event_name":"OnChange (data_handle)","javascript_code":"console.log(data_handle);\ntipoHandle.getTipo('TipoSSTeams', data_handle.new_value, {}).then((res) => {\n    if(res) {\n        data_handle.tipo.team_hierarchy_key = res.team_hierarchy_key;\n        data_handle.formControl.get('team_hierarchy_key').setValue(res.team_hierarchy_key);\n    }\n})","_ARRAY_META":{"_HASH":"7403223965"}}],"_ARRAY_META":{"_HASH":"9568530288"}},{"sequence":9,"display_name___token":"TT___CONTRACTOR_COMPANY","display_name":"Contractor Company","field_type_labels":"TipoSSTeams","field_type":"Tipo.TipoSSTeams","field_name":"contractor_company","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_hyperlink":true,"visibility_expression":"$tipo.choose_locn && !$tipo_handle.user_meta.user_attributes.user.contractor_company","mandatory":false,"relationship_type":"reference","select_label_field_labels":"Display Name","select_label_field":"displayName","select_key_field_labels":"ID","select_key_field":"tipo_id","query_params":[{"param_name":"per_page","param_value":"5000","_ARRAY_META":{"_HASH":"2110735750"}},{"param_name":"tipo_action","param_value":"true","_ARRAY_META":{"_HASH":"6551152273"}}],"tipo_field_event_js":[{"event_name":"OnChange (data_handle)","javascript_code":"console.log(data_handle);\ntipoHandle.getTipo('TipoSSTeams', data_handle.new_value, {}).then((res) => {\n    if(res) {\n        data_handle.tipo.team_hierarchy_key = res.team_hierarchy_key;\n        data_handle.formControl.get('team_hierarchy_key').setValue(res.team_hierarchy_key);\n    }\n})","_ARRAY_META":{"_HASH":"7426256654"}}],"_ARRAY_META":{"_HASH":"6026474061"}},{"sequence":9.1,"display_name":"Locate","field_type_labels":"Action","field_type":"action","field_name":"locate","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","action_settings_":{"javascript_code":"navigator.geolocation.getCurrentPosition(show_map);\n\nfunction show_map(position) {\n  var latitude = position.coords.latitude;\n  var longitude = position.coords.longitude;\n  data_handle.tipo.coordinates = \"--\"+latitude+ \"---\" + longitude+ \"--\";\n  data_handle.formControl.get('coordinates').setValue(\"--\"+latitude+ \"---\" + longitude+ \"--\");\n}\n\nreturn true;"},"_ARRAY_META":{"_HASH":"9780548438"}},{"sequence":10,"display_name":"Company ID","field_type_labels":"Text","field_type":"string","field_name":"company","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"4684811630"}},{"sequence":11,"display_name":"Structure Level 1 ID","field_type_labels":"Text","field_type":"string","field_name":"structure_level_1","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"9334346500"}},{"sequence":14,"display_name":"NextLevel","field_type_labels":"True/False","field_type":"boolean","field_name":"nextLevel","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"7910335056"}},{"sequence":15,"display_name":"Geo description","field_type_labels":"Rich Text","field_type":"richstring","field_name":"geo_description","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","form_text":true,"default_value___token":"TT___PLEASE_SELECT_THE_GEO_LOCATION_TO_PROCEE","default_value":"<p><strong><span style=\"font-size: 14px; color: rgb(209, 72, 65);\">Please select the Geo Location to Proceed further</span></strong></p>","read_only":true,"short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_label":true,"hidden_hyperlink":true,"hide_in_view":true,"visibility_expression":"$tipo.choose_locn && !$tipo.geo_locn && $tipo_handle.tipoInternalHandleService.isOnline","fill_space_invisible":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"3700201584"}},{"sequence":15,"display_name":"Geo description","field_type_labels":"Rich Text","field_type":"richstring","field_name":"geo_description_offline","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","form_text":true,"default_value___token":"TT___PLEASE_ENTER_THE_ADDRESS_TO_PROCEED_FURT","default_value":"<p><strong><span style=\"font-size: 14px; color: rgb(209, 72, 65);\">Please enter the Address to proceed further</span></strong></p>","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_hyperlink":true,"visibility_expression":"$tipo.choose_locn && !$tipo.geo_locn && !$tipo_handle.tipoInternalHandleService.isOnline","relationship_type":"reference","_ARRAY_META":{"_HASH":"0490586401"}},{"sequence":16,"display_name___token":"TT___ADDRESS","display_name":"Address","field_type_labels":"Text","field_type":"string","field_name":"geo_locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_hyperlink":true,"visibility_expression":"!$tipo_handle.tipoInternalHandleService.isOnline && $tipo.choose_locn","mandatory":true,"relationship_type":"reference","tipo_field_event_js":[{"event_name":"OnChange (data_handle)","javascript_code":"console.log(\"data_handle\",data_handle)\nconsole.log(\"data_handle.tipo.geo_locn\",data_handle.tipo.geo_locn)","_ARRAY_META":{"_HASH":"5580233201"}}],"_ARRAY_META":{"_HASH":"5682934536"}},{"sequence":16,"display_name___token":"TT___GEO_LOCATION","display_name":"Geo Location","field_type_labels":"Geo Location","field_type":"location","field_name":"geo_locn","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_hyperlink":true,"visibility_expression":"$tipo.choose_locn && $tipo_handle.tipoInternalHandleService.isOnline","mandatory":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"4837364850"}},{"sequence":17,"display_name___token":"TT___INSPECTOR_16","display_name":"Inspector","field_type_labels":"Text","field_type":"string","field_name":"inspector","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":false,"short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","expression":"$tipo_handle.user_meta.name","_ARRAY_META":{"_HASH":"3081419552"}},{"sequence":17,"display_name":"hierarchy_key","field_type_labels":"Text","field_type":"string","field_name":"hierarchy_key","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"1292234430"}},{"sequence":17,"display_name":"team_hierarchy_key","field_type_labels":"Text","field_type":"string","field_name":"team_hierarchy_key","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"6854461444"}},{"sequence":17,"display_name___token":"TT___NAME_77","display_name":"Name","field_type_labels":"Text","field_type":"string","field_name":"name","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","read_only":false,"short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","expression":"$tipo_handle.user_meta.name","_ARRAY_META":{"_HASH":"3783708600"}},{"sequence":50,"display_name":"Created by","field_type_labels":"Text","field_type":"string","field_name":"created_by","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","expression":"$tipo_handle.user_meta.name","_ARRAY_META":{"_HASH":"2268322141"}},{"sequence":100,"display_name":"Verifications","field_type_labels":"NavigationPlugin","field_type":"Tipo.NavigationPlugin","field_name":"verifications","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"desktop_width":"100","tablet_width":"100","mobile_width":"100","hidden_":false,"hidden_label":true,"hidden_hyperlink":false,"visibility_expression":"($tipo.geo_locn && $tipo.contractor_company) || ($tipo.geo_locn && !$tipo_handle.user_meta.user_attributes.user.contractor_company)","relationship_type":"embed_reference","_ARRAY_META":{"_HASH":"8568200320"}},{"sequence":102,"display_name":"Region","field_type_labels":"Text","field_type":"string","field_name":"inspector_region","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"6556593885"}},{"sequence":103,"display_name":"Area","field_type_labels":"Text","field_type":"string","field_name":"inspector_area","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"7801741176"}},{"sequence":104,"display_name":"user contractor company","field_type_labels":"Text","field_type":"string","field_name":"inspector_contractor_company","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"4993556885"}},{"sequence":105,"display_name":"Inspector uuid","field_type_labels":"Text","field_type":"string","field_name":"inspector_uuid","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"3942525050"}},{"sequence":106,"display_name":"Client ID","field_type_labels":"Text","field_type":"string","field_name":"client","show_question_no":true,"true_alternate_label_str":"Yes","false_alternate_label_str":"No","short_display":true,"disable_expansion":true,"hidden_":true,"hidden_hyperlink":true,"relationship_type":"reference","_ARRAY_META":{"_HASH":"5546901282"}}],"tipo_list":{"desktop_grid":"true","default_page_size":10},"updated_dt":1718699368177,"updated_by":null,"updated_by_labels":"Test Manager","updated_date":"2024-06-18T08:29:28.177Z","created_by":"saadmin@forwoodsafety.com","created_dt":"1683267015895","created_date":"2023-05-05T06:10:15.895Z","application_owner_account":"2000000001","account":"2000000001","tipo_name":"TipoDefinition","hash_key":"2000000001.0443429762.2000000001.TipoDefinition.CreateWPIVerification","el_index":true}}
